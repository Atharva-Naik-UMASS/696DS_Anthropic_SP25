#!/bin/bash
#SBATCH --partition=gpu
#SBATCH --gpus=v100:1
#SBATCH --mem=20GB
#SBATCH --time=08:00:00

# Print GPU info
echo "### GPU Information ###"
nvidia-smi
echo "#######################"

module load conda/latest
conda activate /work/pi_wenlongzhao_umass_edu/6/envs/anthro_finetune
pip install vllm
python test/generate.py --model_dir /datasets/ai/llama3/hub/models--meta-llama--Llama-3.2-1B/snapshots/4e20de362430cd3b72f300e6b0f18e50e7166e08 \
                 --adapter_dir /project/pi_wenlongzhao_umass_edu/6/adapters/transformed_glaive_code.csv \
                 --test_csv /work/pi_wenlongzhao_umass_edu/6/datasets/glaive_code/glaive_code_test.csv \
                 --input_field Text \
                 --output_csv generated_output_adapter_glaive.csv
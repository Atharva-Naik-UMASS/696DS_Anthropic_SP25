#!/bin/bash
#SBATCH --partition=gpu-preempt
#SBATCH --gpus=a100:1
#SBATCH --mem=40GB
#SBATCH --time=08:00:00

# Print GPU info
echo "### GPU Information ###"
nvidia-smi
echo "#######################"

module load conda/latest
conda activate /work/pi_wenlongzhao_umass_edu/6/envs/anthro_finetune
pip install vllm
python test/generate.py --model_dir /datasets/ai/llama3/hub/models--meta-llama--Llama-3.2-1B/snapshots/4e20de362430cd3b72f300e6b0f18e50e7166e08 \
                 --adapter_dir /project/pi_wenlongzhao_umass_edu/6/adapters/MetaMath-then-GlaiveCode-v1 \
                 --test_csv /work/pi_wenlongzhao_umass_edu/6/datasets/meta_math_qa/meta_math_test.csv \
                 --input_field Text \
                 --output_csv /work/pi_wenlongzhao_umass_edu/6/outputs/generated_output_MathThenGlaive_adapter_math.csv